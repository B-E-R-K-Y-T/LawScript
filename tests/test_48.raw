ВКЛЮЧИТЬ стандартная_библиотека.*

ОПРЕДЕЛИТЬ ПРОЦЕДУРУ сон3() (
    ЖДАТЬ В ФОНЕ асинхронный_сон(1);
)

ОПРЕДЕЛИТЬ ПРОЦЕДУРУ сон2() (
    ЖДАТЬ В ФОНЕ сон3();
)

ОПРЕДЕЛИТЬ ПРОЦЕДУРУ сон1() (
    ЖДАТЬ В ФОНЕ сон2();
)

ОПРЕДЕЛИТЬ ПРОЦЕДУРУ сон() (
    ЖДАТЬ В ФОНЕ сон1();
)

ОПРЕДЕЛИТЬ ПРОЦЕДУРУ таска(номер) (
    НАПЕЧАТАТЬ форматировать_строку("Старт таски {}", номер);
    ЖДАТЬ В ФОНЕ сон();
    НАПЕЧАТАТЬ форматировать_строку("Конец таски {}", номер);
)


ОПРЕДЕЛИТЬ ПРОЦЕДУРУ запуск_программы() (
    ЗАДАТЬ задачи = Список();

    ЦИКЛ номер ОТ 1 ДО 100 (
        задачи:добавить(В ФОНЕ таска(номер));
    )

    ждать_всех(задачи:в_массив());
)

ВЫПОЛНИТЬ (
    запуск_программы();
)
