ВКЛЮЧИТЬ стандартная_библиотека.*

!ВКЛЮЧИТЬ стандартная_библиотека.время
!ВКЛЮЧИТЬ стандартная_библиотека.строки
!ВКЛЮЧИТЬ стандартная_библиотека.рандом
!ВКЛЮЧИТЬ стандартная_библиотека.конкурентность
!ВКЛЮЧИТЬ стандартная_библиотека.структуры.сложные_структуры


ОПРЕДЕЛИТЬ ПРОЦЕДУРУ тест(ранд)(
    ЦИКЛ счет ОТ 1 ДО 5 (
        НАПЕЧАТАТЬ "ПРИВЕТ! " + в_строку(счет);
    )

    ВЕРНУТЬ ранд:получить_целое_в_диапазоне(1, 100);
)

ОПРЕДЕЛИТЬ ПРОЦЕДУРУ тест2(событие)(
    ПОКА НЕ событие:выполнено() (
        НАПЕЧАТАТЬ "ПРИВЕТ! тест2";
    )

    ВЕРНУТЬ 2;
)

ОПРЕДЕЛИТЬ ПРОЦЕДУРУ вход_в_программу()(
    Список();
    ЗАДАТЬ р = ГенераторСлучайныхЧисел();
    ЗАДАТЬ фон = массив(В ФОНЕ тест(р));

    ЗАДАТЬ синхронизатор = СобытиеСинхронизатор();
    ЗАДАТЬ фон2 = В ФОНЕ тест2(синхронизатор);

    ЦИКЛ ОТ 1 ДО 3 (
        добавить_в_массив(фон, В ФОНЕ тест(р));
    )

    НАПЕЧАТАТЬ ждать_всех(фон);

    синхронизатор:иницировать_событие();
    НАПЕЧАТАТЬ ЖДАТЬ фон2;
)

ВЫПОЛНИТЬ (
    вход_в_программу();
)
