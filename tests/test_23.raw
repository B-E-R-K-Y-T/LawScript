ВКЛЮЧИТЬ стандартная_библиотека.*


ОПРЕДЕЛИТЬ ПРОЦЕДУРУ фон (номер, список)(
    НАПЕЧАТАТЬ "СТАРТ =  " + в_строку(номер);
    !БЛОКИРОВАТЬ (
        ЦИКЛ счет ОТ 1 ДО 10 (
            список:положить(номер);
            НАПЕЧАТАТЬ "ПРИВЕТ из " + в_строку(номер) + " iter=" + в_строку(счет);
        )
    !)
    ВЕРНУТЬ 1;
)

ОПРЕДЕЛИТЬ ПРОЦЕДУРУ вход() (
	ЗАДАТЬ старт = временная_метка();
	ЗАДАТЬ с = Очередь(10000);
	ЗАДАТЬ спис = Список(массив());

	ЦИКЛ счет ОТ 1 ДО 10 (
		спис:добавить(В ФОНЕ фон(счет, с));
	)

    ЗАДАТЬ ффф = 0;

    ЦИКЛ счет ОТ 1 ДО 100 (
	    ффф = ффф + 1;
		НАПЕЧАТАТЬ "ПРИВЕТ из осн цикл";
		ПРОПУСТИТЬ;
	)

    НАПЕЧАТАТЬ ффф;
    спать(1);

    ждать_всех(спис:в_массив());

    ЗАДАТЬ рез = Список();
	ПОКА НЕ с:пуста() (
		рез:добавить(с:взять());
	)

	НАПЕЧАТАТЬ рез:в_массив();
	НАПЕЧАТАТЬ временная_метка() - старт;
    НАПЕЧАТАТЬ ффф;
)

ВЫПОЛНИТЬ (
	вход();
)



